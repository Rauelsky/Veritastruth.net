(window.webpackJsonp=window.webpackJsonp||[]).push([[11,31],{294:function(e,t,n){"use strict";n.d(t,"b",(function(){return L})),n.d(t,"a",(function(){return E}));var r=n(25),a=n.n(r),s=n(14),c=n.n(s),l=n(4),u=n.n(l),p=n(5),h=n.n(p),y=n(8),v=n.n(y),w=n(1),_=n.n(w),m=n(11),b=n.n(m),F=n(9),g=n.n(F),k=n(10);function _regenerator(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function i(n,r,a,c){var l=r&&r.prototype instanceof Generator?r:Generator,u=Object.create(l.prototype);return _regeneratorDefine2(u,"_invoke",function(n,r,a){var c,l,u,p=0,h=a||[],y=!1,v={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function d(t,n){return c=t,l=0,u=e,v.n=n,s}};function d(n,r){for(l=n,u=r,t=0;!y&&p&&!a&&t<h.length;t++){var a,c=h[t],w=v.p,_=c[2];n>3?(a=_===r)&&(u=c[(l=c[4])?5:(l=3,3)],c[4]=c[5]=e):c[0]<=w&&((a=n<2&&w<c[1])?(l=0,v.v=r,v.n=c[1]):w<_&&(a=n<3||c[0]>r||r>_)&&(c[4]=n,c[5]=r,v.n=_,l=0))}if(a||n>1)return s;throw y=!0,r}return function(a,h,w){if(p>1)throw TypeError("Generator is already running");for(y&&1===h&&d(h,w),l=h,u=w;(t=l<2?e:u)||!y;){c||(l?l<3?(l>1&&(v.n=-1),d(l,u)):v.n=u:v.v=u);try{if(p=2,c){if(l||(a="next"),t=c[a]){if(!(t=t.call(c,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,l<2&&(l=0)}else 1===l&&(t=c.return)&&t.call(c),l<2&&(u=TypeError("The iterator does not provide a '"+a+"' method"),l=1);c=e}else if((t=(y=v.n<0)?u:n.call(r,v))!==s)break}catch(t){c=e,l=1,u=t}finally{p=1}}return{value:t,done:y}}}(n,a,c),!0),u}var s={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(_regeneratorDefine2(t={},r,(function(){return this})),t),l=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,GeneratorFunctionPrototype):(e.__proto__=GeneratorFunctionPrototype,_regeneratorDefine2(e,a,"GeneratorFunction")),e.prototype=Object.create(l),e}return GeneratorFunction.prototype=GeneratorFunctionPrototype,_regeneratorDefine2(l,"constructor",GeneratorFunctionPrototype),_regeneratorDefine2(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName="GeneratorFunction",_regeneratorDefine2(GeneratorFunctionPrototype,a,"GeneratorFunction"),_regeneratorDefine2(l),_regeneratorDefine2(l,a,"Generator"),_regeneratorDefine2(l,r,(function(){return this})),_regeneratorDefine2(l,"toString",(function(){return"[object Generator]"})),(_regenerator=function _regenerator(){return{w:i,m:f}})()}function _regeneratorDefine2(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(_regeneratorDefine2=function _regeneratorDefine(e,t,n,r){function o(t,n){_regeneratorDefine2(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))})(e,t,n,r)}function _callSuper(e,t,n){return t=_()(t),v()(e,function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function _isNativeReflectConstruct(){return!!e}()}()?Reflect.construct(t,n||[],_()(e).constructor):t.apply(e,n))}var L={dataFetch:"UX:data-fetch"},E=function(e){function ShowRecommended(e){var t;return u()(this,ShowRecommended),(t=_callSuper(this,ShowRecommended)).wrapper=e,t.initialize(t.wrapper),t}return g()(ShowRecommended,e),h()(ShowRecommended,[{key:"selectors",get:function get(){return{lazyLoad:"lazy-load",delayLoad:"delayLoad"}}},{key:"classList",get:function get(){return{base:"show-recommended",delayLoad:"delayLoad",delayedLoad:"delayedLoad"}}},{key:"removeShowRecommendedIfNoData",get:function get(){return!0}},{key:"ajaxUrl",get:function get(){return this.wrapper.dataset.ajaxurl}},{key:"initialize",value:function initialize(e){var t=this;!function _superPropGet(e,t,n,r){var a=b()(_()(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof a?function(e){return a.apply(n,e)}:a}(ShowRecommended,"initialize",this,3)([]),window.isShowRecommendedFetched=!1,this.fetchContent().then((function(){t.afterAjax()}))}},{key:"fetchContent",value:(t=c()(_regenerator().m((function _callee(){var e,t,n;return _regenerator().w((function(r){for(;;)switch(r.p=r.n){case 0:return r.p=0,r.n=1,fetch(this.ajaxUrl);case 1:if(200===(e=r.v).status){r.n=2;break}throw new Error("Failed to load content");case 2:return r.n=3,e.text();case 3:t=r.v,this.wrapper.innerHTML=t,r.n=5;break;case 4:r.p=4,n=r.v,console.debug(n);case 5:return r.a(2)}}),_callee,this,[[0,4]])}))),function fetchContent(){return t.apply(this,arguments)})},{key:"afterAjax",value:function afterAjax(){var e=this;setTimeout((function(){e.hideSkeletons(),e.emitFetchedEvent()}),10)}},{key:"emitFetchedEvent",value:function emitFetchedEvent(){var e=new Event(L.dataFetch);window.dispatchEvent(e),window.isShowRecommendedFetched=!0}},{key:"hideSkeletons",value:function hideSkeletons(){var e,t,n,r,s=this;(null===(e=this.wrapper.querySelectorAll(this._selectors.lazyLoad))||void 0===e||e.forEach((function(e){return e.parentNode.removeChild(e)})),null===(t=this.wrapper.querySelectorAll(this._selectors.delayLoad))||void 0===t||t.forEach((function(e){return e.classList.remove(s._classList.delayLoad).add(s._classList.delayedLoad)})),this.removeShowRecommendedIfNoData)?this.wrapper.children[0]&&this.wrapper.children[0].children[0]?(n=this.wrapper).replaceWith.apply(n,a()(this.wrapper.children)):this.wrapper.parentNode.classList.contains(this._classList.base)&&this.wrapper.parentNode.remove():(r=this.wrapper).replaceWith.apply(r,a()(this.wrapper.children))}}]);var t}(k.a)},322:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return F}));var r=n(4),a=n.n(r),s=n(5),c=n.n(s),l=n(8),u=n.n(l),p=n(1),h=n.n(p),y=n(11),v=n.n(y),w=n(9),_=n.n(w),m=n(10),b=n(294);function _callSuper(e,t,n){return t=h()(t),u()(e,function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function _isNativeReflectConstruct(){return!!e}()}()?Reflect.construct(t,n||[],h()(e).constructor):t.apply(e,n))}function _superPropGet(e,t,n,r){var a=v()(h()(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof a?function(e){return a.apply(n,e)}:a}var F=function(e){function PopNotification(e){var t;return a()(this,PopNotification),(t=_callSuper(this,PopNotification))._constants=t.constants,t.wrapper=e,t.popupFloatAfter=t.wrapper.classList.contains(t._classList.popupFloatAfter),t._visibility=t.visibility,t._visibility&&t._visibility.indexOf("%")>-1&&(t._visibility=parseFloat(t._visibility)/100),t.initialize(),t.checkVisibility(),t.addEventListeners(),t}return _()(PopNotification,e),c()(PopNotification,[{key:"constants",get:function get(){return{TIMER:200,FOOTER_OFFSET:200,TRANSITION:250,FLOAT_EL_OFFSET:200}}},{key:"visibility",get:function get(){return this.wrapper.dataset.visibleAfter}},{key:"selectors",get:function get(){return{closeBtn:".pop-notification__close",footer:".footer"}}},{key:"elements",get:function get(){return{closeBtn:[],popupFloatAfterPlaceholder:null}}},{key:"classList",get:function get(){return{show:"show",relatedContent:"related-content",popupFloatAfter:"pop-after-passed",popupFloatAfterPassed:"js-sticky",popupFloatAfterPlaceholder:"js-intersection-placeholder",transitioned:"js-transitioned"}}},{key:"initialize",value:function initialize(){_superPropGet(PopNotification,"initialize",this,3)([]),this.setControlElements(),this.popupFloatAfter&&(this.setPopupFloatAfterPlaceholder(),this.checkElPassedScroll())}},{key:"addEventListeners",value:function addEventListeners(){_superPropGet(PopNotification,"addEventListeners",this,3)([]),this.visibility&&(this.checkVisibilityEvent=this.checkVisibility.bind(this),window.addEventListener("scroll",this.checkVisibilityEvent)),this.popupFloatAfter&&(this.checkElPassedScrollEvent=this.checkElPassedScroll.bind(this),window.addEventListener("scroll",this.checkElPassedScrollEvent)),window.addEventListener(b.b.dataFetch,this.setControlElements.bind(this))}},{key:"setControlElements",value:function setControlElements(){var e=this;this._elements.closeBtn=this.wrapper.querySelectorAll(this._selectors.closeBtn),this._elements.closeBtn.forEach((function(t){t.addEventListener("click",e.onClick.bind(e))}))}},{key:"setPopupFloatAfterPlaceholder",value:function setPopupFloatAfterPlaceholder(){var e=document.createElement("div");e.classList.add(this._classList.popupFloatAfterPlaceholder),this.popupFloatAfterDummyId="pop-after-passed-placeholder-".concat(Math.floor(1e4*Math.random())),e.setAttribute("id",this.popupFloatAfterDummyId),this.wrapper.insertAdjacentElement("afterend",e),this._elements.popupFloatAfterPlaceholder=document.getElementById(this.popupFloatAfterDummyId)}},{key:"onClick",value:function onClick(e){var t=this;if(e.preventDefault(),this.wrapper.classList.remove("show"),this.popupFloatAfter)return window.removeEventListener("scroll",this.checkVisibilityEvent),window.removeEventListener("scroll",this.checkElPassedScrollEvent),this.wrapper.classList.remove(this._classList.popupFloatAfterPassed),void this.wrapper.classList.remove(this._classList.transitioned);setTimeout((function(){t.wrapper.remove()}),this._constants.TIMER)}},{key:"setVisibility",value:function setVisibility(e){e?this.wrapper.classList.add(this._classList.show):this.wrapper.classList.remove(this._classList.show)}},{key:"setFloat",value:function setFloat(e){var t=this;e?(this.wrapper.classList.add(this._classList.popupFloatAfterPassed),this.settimeout=setTimeout((function(){return t.wrapper.classList.add(t._classList.transitioned)}),this._constants.TRANSITION)):(this.wrapper.classList.remove(this._classList.popupFloatAfterPassed),this.wrapper.classList.remove(this._classList.transitioned))}},{key:"checkVisibility",value:function checkVisibility(){var e,t=document.body.getBoundingClientRect().height*this._visibility,n=window.pageYOffset,r=null===(e=document.querySelector(this._selectors.footer))||void 0===e?void 0:e.getBoundingClientRect(),a=(null==r?void 0:r.height)-(null==r?void 0:r.top)+this._constants.FOOTER_OFFSET||-1;this.setVisibility(n>t&&a<0)}},{key:"checkElPassedScroll",value:function checkElPassedScroll(){var e=window.scrollY,t=this._elements.popupFloatAfterPlaceholder.offsetTop+this._elements.popupFloatAfterPlaceholder.offsetHeight+this._constants.FLOAT_EL_OFFSET;this.setFloat(e>t)}}])}(m.a)},496:function(e,t,n){"use strict";n.r(t);var r,a=n(294),s=n(322),c=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),__awaiter=function(e,t,n,r){return new(n||(n=Promise))((function(a,s){function fulfilled(e){try{step(r.next(e))}catch(e){s(e)}}function rejected(e){try{step(r.throw(e))}catch(e){s(e)}}function step(e){e.done?a(e.value):function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())}))},__generator=function(e,t){var n,r,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function verb(s){return function(l){return function step(s){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return c.label++,{value:s[1],done:!1};case 5:c.label++,r=s[1],s=[0];continue;case 7:s=c.ops.pop(),c.trys.pop();continue;default:if(!(a=c.trys,(a=a.length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){c=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){c.label=s[1];break}if(6===s[0]&&c.label<a[1]){c.label=a[1],a=s;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(s);break}a[2]&&c.ops.pop(),c.trys.pop();continue}s=t.call(e,c)}catch(e){s=[6,e],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},l=function(e){function ShowRecommended(){return null!==e&&e.apply(this,arguments)||this}return c(ShowRecommended,e),ShowRecommended.prototype.fetchContent=function(){return __awaiter(this,void 0,void 0,(function(){var e,t,n;return __generator(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,fetch(this.ajaxUrl)];case 1:return 200!==(e=r.sent()).status?(console.warn("Failed to load recommended content"),[2]):[4,e.text()];case 2:return t=r.sent(),this.wrapper.innerHTML=t,(n=this.wrapper.querySelector(".pop-notification"))&&new s.default(n),[3,4];case 3:return r.sent(),[3,4];case 4:return[2]}}))}))},ShowRecommended}(a.a);t.default=l}}]);
//# sourceMappingURL=ShowRecommended-01b828f18033f46e0583.js.map