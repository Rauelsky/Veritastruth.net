(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{815:function(e,t,o){"use strict";o.r(t);var r=o(4),i=o.n(r),n=o(5),s=o.n(n),p=o(8),l=o.n(p),a=o(1),c=o.n(a),v=o(11),u=o.n(v),h=o(9),m=o.n(h),d=o(10),_=o(18);function _callSuper(e,t,o){return t=c()(t),l()(e,function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function _isNativeReflectConstruct(){return!!e}()}()?Reflect.construct(t,o||[],c()(e).constructor):t.apply(e,o))}function _superPropGet(e,t,o,r){var i=u()(c()(1&r?e.prototype:e),t,o);return 2&r&&"function"==typeof i?function(e){return i.apply(o,e)}:i}var g,y=function(e){function CoverImage(e){var t,o;return i()(this,CoverImage),(o=_callSuper(this,CoverImage)).isPopupOpened=!1,o.COVER_TRANSITION_DURATION=450,o.wrapper=e,o.isViewable=null===(t=o.wrapper.querySelector(o._selectors.coverImageWrapper))||void 0===t?void 0:t.dataset.isViewable,o.isViewable&&o.initializePopup(),o}return m()(CoverImage,e),s()(CoverImage,[{key:"selectors",get:function get(){return{btnViewCover:".cover-image__view-cover",coverImageWrapper:".cover-image__image",coverImage:".cover-image__image img",popupView:".cover-image__popup-view",popupCover:".cover-image__popup-view__cover img",movingCover:".cover-image__popup-moving-cover",hoverOverlay:".cover-image__image__hover-overlay",closePopup:".cover-image__popup-view__close-popup button",coverImageCaptionWrapper:".cover-image__popup-view__caption-wrapper"}}},{key:"elements",get:function get(){return{btnViewCover:null,popupView:null,popupCover:null,movingCover:null,coverImageWrapper:null,coverImage:null,hoverOverlay:null,closePopup:null,coverImageCaptionWrapper:null}}},{key:"classList",get:function get(){return{visible:"visible"}}},{key:"initializePopup",value:function initializePopup(){_superPropGet(CoverImage,"initialize",this,3)([]),this._elements={btnViewCover:this.wrapper.querySelector(this._selectors.btnViewCover),popupView:this.wrapper.querySelector(this._selectors.popupView),popupCover:this.wrapper.querySelector(this._selectors.popupCover),movingCover:this.wrapper.querySelector(this._selectors.movingCover),coverImageWrapper:this.wrapper.querySelector(this._selectors.coverImageWrapper),coverImage:this.wrapper.querySelector(this._selectors.coverImage),hoverOverlay:this.wrapper.querySelector(this._selectors.hoverOverlay),closePopup:this.wrapper.querySelector(this._selectors.closePopup),coverImageCaptionWrapper:this.wrapper.querySelector(this._selectors.coverImageCaptionWrapper)},this.observeLoadCoverImages(),this._elements.popupView&&!this._elements.popupView.getAttribute("aria-modal")&&this._elements.popupView.setAttribute("aria-modal","true"),this._elements.popupView&&!this._elements.popupView.getAttribute("role")&&this._elements.popupView.setAttribute("role","dialog"),this.addEventListeners()}},{key:"addEventListeners",value:function addEventListeners(){var e,t,o,r,i,n;(_superPropGet(CoverImage,"addEventListeners",this,3)([]),this._elements.hoverOverlay)?(null===(r=this._elements.coverImageWrapper)||void 0===r||r.addEventListener("click",this.showPopup.bind(this)),null===(i=this._elements.coverImageWrapper)||void 0===i||i.addEventListener("keydown",this.handleHoverOverlayKeydown.bind(this))):null===(n=this._elements.btnViewCover)||void 0===n||n.addEventListener("click",this.showPopup.bind(this));null===(e=this._elements.popupView)||void 0===e||e.addEventListener("click",this.closePopup.bind(this)),null===(t=this._elements.closePopup)||void 0===t||t.addEventListener("click",this.closePopup.bind(this)),null===(o=this._elements.coverImageCaptionWrapper)||void 0===o||o.addEventListener("click",(function(e){return e.stopPropagation()})),document.addEventListener("keydown",this.handlePopupKeydown.bind(this))}},{key:"showPopup",value:function showPopup(e){var t,o=this;e.preventDefault(),this.isPopupOpened||(this.isPopupOpened=!0,document.body.style.overflow="hidden",this.animateCover({from:this._elements.coverImage,to:this._elements.popupCover}),this._elements.popupView.classList.add(this._classList.visible),this._elements.popupView.removeAttribute("aria-hidden"),null===(t=this._elements.btnViewCover)||void 0===t||t.setAttribute("disabled","true"),setTimeout((function(){var e,t;null===(e=o._elements.popupView.querySelectorAll(_.a)[0])||void 0===e||e.focus(),null===(t=o._elements.coverImageCaptionWrapper)||void 0===t||t.setAttribute("role","alert")}),this.COVER_TRANSITION_DURATION))}},{key:"closePopup",value:function closePopup(e){var t,o=this;e.preventDefault(),e.stopImmediatePropagation(),this.isPopupOpened=!1,document.body.style.overflow="visible",this.animateCover({from:this._elements.popupCover,to:this._elements.coverImage}),this._elements.popupView.classList.remove(this._classList.visible),this._elements.popupView.setAttribute("aria-hidden","true"),null===(t=this._elements.btnViewCover)||void 0===t||t.removeAttribute("disabled"),setTimeout((function(){var e,t;null===(e=o._elements.coverImageCaptionWrapper)||void 0===e||e.removeAttribute("role"),null===(t=o._elements.btnViewCover)||void 0===t||t.focus()}),this.COVER_TRANSITION_DURATION)}},{key:"animateCover",value:function animateCover(e){var t=this,o=e.from.getBoundingClientRect(),r=e.to.getBoundingClientRect();this._elements.movingCover.style.width=o.width+"px",this._elements.movingCover.style.height=o.height+"px",this._elements.movingCover.style.top=o.top+"px",this._elements.movingCover.style.left=o.left+"px";var i=r.left-o.left,n=r.top-o.top;this._elements.movingCover.style.transform="translate3d(".concat(i,"px, ").concat(n,"px, 0) scale(").concat(r.width/o.width,")"),setTimeout((function(){t._elements.movingCover.style.opacity="0",setTimeout((function(){t._elements.movingCover.style.opacity="1",t._elements.movingCover.style.transform="unset",t._elements.movingCover.style.width="0px",t._elements.movingCover.style.height="0px",t._elements.movingCover.style.top="0px",t._elements.movingCover.style.left="0px"}),200)}),this.COVER_TRANSITION_DURATION)}},{key:"observeLoadCoverImages",value:function observeLoadCoverImages(){var e=this;new IntersectionObserver((function(t,o){t.forEach((function(t){t.isIntersecting&&(e.loadCoverImages(),o.unobserve(t.target))}))}),{rootMargin:"200px 0px"}).observe(this._elements.coverImageWrapper)}},{key:"loadCoverImages",value:function loadCoverImages(){if(this._elements.movingCover){var e,t=null===(e=this._elements.movingCover.dataset)||void 0===e?void 0:e.coverSrc;this._elements.movingCover.style.backgroundImage="url('".concat(t,"')")}if(this._elements.popupCover){var o,r=null===(o=this._elements.popupCover.dataset)||void 0===o?void 0:o.coverSrc;this._elements.popupCover.setAttribute("src",r)}}},{key:"handlePopupKeydown",value:function handlePopupKeydown(e){if(e.keyCode===_.d.ESC&&this.isPopupOpened&&this.closePopup(e),e.keyCode===_.d.TAB&&this.isPopupOpened){var t=this._elements.popupView.querySelectorAll(_.a);if((null==t?void 0:t.length)>0){var o=t[0],r=t[t.length-1];e.shiftKey?document.activeElement===o&&(null==r||r.focus(),e.preventDefault()):document.activeElement===r&&(null==o||o.focus(),e.preventDefault())}}}},{key:"handleHoverOverlayKeydown",value:function handleHoverOverlayKeydown(e){e.keyCode===_.d.RETURN&&this.showPopup(e)}}])}(d.a),w=(g=function(e,t){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}g(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),__assign=function(){return(__assign=Object.assign||function(e){for(var t,o=1,r=arguments.length;o<r;o++)for(var i in t=arguments[o])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},C=function(e){function CoverImage(){return null!==e&&e.apply(this,arguments)||this}return w(CoverImage,e),Object.defineProperty(CoverImage.prototype,"childSelectors",{get:function(){return __assign(__assign({},this._selectors),{tocViewCoverList:".cover-image__toc-view-cover",linkCoverImg:".cover-image__popup-view__caption-wrapper a",coverPopup:".cover-image__popup-view"})},enumerable:!1,configurable:!0}),CoverImage.prototype.initializePopup=function(){var t;e.prototype.initialize.call(this),this.tocViewCoverList=document.querySelectorAll(this.childSelectors.tocViewCoverList),this._elements={btnViewCover:this.wrapper.querySelector(this.childSelectors.btnViewCover),popupView:this.wrapper.querySelector(this.childSelectors.popupView),popupCover:this.wrapper.querySelector(this.childSelectors.popupCover),movingCover:this.wrapper.querySelector(this.childSelectors.movingCover),coverImageWrapper:this.wrapper.querySelector(this.childSelectors.coverImageWrapper),coverImage:this.wrapper.querySelector(this.childSelectors.coverImage),hoverOverlay:this.wrapper.querySelector(this.childSelectors.hoverOverlay),closePopup:this.wrapper.querySelector(this.childSelectors.closePopup),captionLink:this.wrapper.querySelector(this.childSelectors.linkCoverImg),coverPopupWrapper:this.wrapper.querySelector(this.childSelectors.coverPopup),coverImageCaptionWrapper:this.wrapper.querySelector(this.childSelectors.coverImageCaptionWrapper)},this._elements.movingCover&&(this.coverSrc=null===(t=this._elements.movingCover.dataset)||void 0===t?void 0:t.coverSrc,this._elements.movingCover.style.backgroundImage="url('"+this.coverSrc+"')"),this._elements.captionLink&&this._elements.captionLink.addEventListener("click",this.redirectCaptionLink),this.addEventListeners()},CoverImage.prototype.addEventListeners=function(){var t=this;e.prototype.addEventListeners.call(this),this.tocViewCoverList.forEach((function(o){o.addEventListener("click",e.prototype.showPopup.bind(t)),o.style.cursor="pointer"}))},CoverImage.prototype.redirectCaptionLink=function(e){e.preventDefault(),e.stopPropagation();var t=e.currentTarget;window.location.href=t.getAttribute("href")},CoverImage}(y);t.default=C}}]);
//# sourceMappingURL=coverImage-016e76cc0efd6a6279e1.js.map