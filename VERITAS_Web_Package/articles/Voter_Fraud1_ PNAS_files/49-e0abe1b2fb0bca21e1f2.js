(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{270:function(t,e,i){"use strict";var s=i(291),a=function(){function Total(t,e){this.container=t,this.selector=e}return Total.prototype.init=function(t){this.totalItem=this.container.querySelector("."+this.selector+" .metrics-total__item--"+t),this.totalItemIcon=this.totalItem.querySelector(".metric-icon-fill")},Total.prototype.remove=function(){this.totalItem.classList.remove("metrics-selected--js"),this.totalItemIcon.classList.remove("metrics-selected--js")},Total.prototype.add=function(){this.totalItem.classList.add("metrics-selected--js"),this.totalItemIcon.classList.add("metrics-selected--js"),Object(s.b)(this.totalItem.querySelector(".metrics-total__item-text"))},Total}();e.a=a},293:function(t,e,i){"use strict";var s=i(270),a=function(){function Nav(t,e,i,s){this.container=t,this.selector=e,this.parentWidget=i,this.trackArticleMetrics=s,this.navTitle="",this.index=0}return Nav.prototype.init=function(t){t.preventDefault(),this.total=new s.a(this.container,this.selector),this.total.init(this.navTitle),this.disable()},Nav.prototype.handler=function(t){this.thisNav=t.currentTarget,this.navTitle=this.thisNav.dataset.title,this.init(t),this.parentWidget.selectedTabs=this.thisNav.closest(".metrics-nav").querySelectorAll(".metrics-selected--js"),this.thisNav.classList.contains("metrics-selected--js")?this.unSelect():(this.select(),this.trackArticleMetrics.init("select",this.navTitle)),this.parentWidget.selectedTabs=this.thisNav.closest(".metrics-nav").querySelectorAll(".metrics-selected--js")},Nav.prototype.unSelect=function(){this.parentWidget.selectedTabs.length<=1||(this.trackArticleMetrics.init("deselect",this.navTitle),this.thisNav.classList.remove("metrics-selected--js"),this.total.remove())},Nav.prototype.select=function(){this.thisNav.classList.add("metrics-selected--js"),this.total.add()},Nav.prototype.setNavIndex=function(){var t=Array.prototype.slice.call(this.container.querySelectorAll(".metrics-nav__item")),e=this.container.querySelector(".metrics-nav__item-link--"+this.navTitle);this.index=t.indexOf(e.parentNode)},Nav.prototype.disable=function(){var t=(this.selector,".metrics-header");this.disabledNav=this.container.querySelector("."+this.selector+" > "+t+" .metrics-nav__item .metrics-nav__item-link--disabled"),this.disabledNav&&this.disabledNav.classList.remove("metrics-selected--js")},Nav}();e.a=a},483:function(t,e,i){var s=i(42);t.exports=function template(t){var e,i="",a={},n=t||{};return function(t,n,c,r,l,o){var h={download:'<svg aria-hidden="true" viewBox="-2 0 14 14" class="metrics-icon metrics-icon--download"><path d="M10 5.5H7v-4H3v4H0l5 5zm-10 6v1h10v-1z"/></svg>',downloads:'<svg aria-hidden="true" viewBox="-2 0 14 14" class="metrics-icon metrics-icon--downloads"><path d="M10 5.5H7v-4H3v4H0l5 5zm-10 6v1h10v-1z"/></svg>',citation:'<svg aria-hidden="true" viewBox="0 0 14 14" class="metrics-icon metrics-icon--citation"><path d="M2.3 11h2l2-3V3h-5v5h3zm6.4 0h2l2-3V3h-5v5h3z"/></svg>',citations:'<svg aria-hidden="true" viewBox="0 0 14 14" class="metrics-icon metrics-icon--citations"><path d="M2.3 11h2l2-3V3h-5v5h3zm6.4 0h2l2-3V3h-5v5h3z"/></svg>',views:'<svg aria-hidden="true" viewBox="0 0 14 14" class="metrics-icon metrics-icon--views"><path d="M7 2.27a7.56 7.56 0 00-7 4.76 7.56 7.56 0 0014 0 7.56 7.56 0 00-7-4.76zm0 7.93a3.17 3.17 0 110-6.35 3.17 3.17 0 010 6.35zm0-5.04A1.87 1.87 0 107 8.9a1.87 1.87 0 000-3.73z"/></svg>',facebook:'<svg aria-hidden="true" viewBox="0 0 14 14" class="metrics-icon metrics-icon--facebook"><path d="M.84 0a.8.8 0 00-.8.8v12.4c0 .44.36.8.8.8h6.78V8.61H5.68v-2.1h1.76v-1.6c0-1.75 1.14-2.89 2.82-2.89l1.58.1v1.93H10.7c-.88 0-.97.35-.97.96v1.41h2.1l-.43 2.11H9.64V14h3.52a.8.8 0 00.8-.8V.8a.8.8 0 00-.8-.8z"/></svg>',twitter:'<svg aria-hidden="true" viewBox="0 0 14 14" class="metrics-icon metrics-icon--twitter""><path d="M12.28 4.57v.35a10.3 10.3 0 01-2 5.67 6.2 6.2 0 01-2.45 2c-1.05.62-2.1.7-3.32.7A6.98 6.98 0 01.5 12.08h.7c1.22 0 2.35-.52 3.4-1.4a2.62 2.62 0 01-2.53-2h.52c.27 0 .53 0 .7-.17-.7 0-1.22-.35-1.66-.88a3.07 3.07 0 01-.6-1.83c.34.18.78.26 1.21.26A2.97 2.97 0 01.94 3.7c0-.61.08-1.05.35-1.49.7.88 1.48 1.66 2.53 2.19a6.1 6.1 0 003.14.87v-.7c0-.87.26-1.48.78-2.1.53-.52 1.05-.87 1.75-.87s1.4.35 1.92.88c.7-.1 1.13-.35 1.74-.7a2.62 2.62 0 01-1.22 1.74l1.57-.43a5.34 5.34 0 01-1.3 1.48z"/></svg>',stackexchange:'<svg aria-hidden="true" viewBox="0 0 14 14" class="metrics-icon metrics-icon--stackexchange"><path d="M1.8 9.4h10.4v.6c0 1-.7 1.7-1.6 1.7H10L7.9 14v-2.3H3.4c-.9 0-1.6-.7-1.6-1.7zm0-.6h10.4V6.7H1.8zm0-2.7h10.4V3.9H1.8zM10.6 1H3.4c-.9 0-1.6.8-1.6 1.7v.6h10.4v-.6c0-1-.7-1.7-1.6-1.7z"/></svg>',blog:'<svg aria-hidden="true" viewBox="0 0 14 14" class="metrics-icon metrics-icon--blog"><path d="M11.8 1.4H2.2c-.7 0-1.2.5-1.2 1.1v10.9L3.4 11h8.4c.7 0 1.2-.5 1.2-1.3V2.5c0-.6-.5-1.1-1.2-1.1zm-1.2 7.2H3.4V7.4h7.2zm0-1.8H3.4V5.5h7.2zm0-1.8H3.4V3.7h7.2z"/></svg>',default:'<svg aria-hidden="true" viewBox="0 0 14 14" class="metrics-icon metrics-icon--default"><path d="M2.3 3.5h10.5V2.3H2.3c-.6 0-1.1.6-1.1 1.2v6.4H0v1.8h8.2V9.9H2.3zm11.1 1.2H10c-.3 0-.6.2-.6.5v5.9c0 .3.3.6.6.6h3.5c.3 0 .6-.3.6-.6V5.3c0-.4-.3-.6-.6-.6zm-.6 5.2h-2.3V6h2.3z"/></svg>',newsfeed:'<svg aria-hidden="true" viewBox="0 0 14 14" class="metrics-icon metrics-icon--newsfeed"><path d="M9.8 0H2.2C1.5 0 1 .6 1 1.3v8.9h1.2v-9h7.6zm2 2.6h-7c-.8 0-1.3.5-1.3 1.2v9c0 .7.5 1.2 1.3 1.2h7c.7 0 1.2-.6 1.2-1.3V3.8c0-.7-.5-1.2-1.3-1.2zm0 10.1h-7V3.8h7z"/></svg>',wikipedia:'<svg aria-hidden="true" viewBox="0 0 14 14" class="metrics-icon metrics-icon--wikipedia"><path d="M7 0a7 7 0 100 14A7 7 0 007 0zm4.9 4.2H9.8c-.3-.8-.5-1.7-1-2.5 1.3.4 2.4 1.3 3 2.5zM7 1.4c.6.9 1 1.7 1.3 2.8H5.7c.3-1 .7-2 1.3-2.8zm-5.5 7a5.7 5.7 0 010-2.8H4a11.6 11.6 0 000 2.8zm.6 1.4h2.1c.3.8.5 1.7 1 2.5a5.7 5.7 0 01-3-2.5zm2.1-5.6h-2a5.6 5.6 0 013-2.5c-.5.8-.7 1.7-1 2.5zM7 12.7c-.6-.9-1-1.9-1.3-3h2.6c-.3 1.1-.8 2-1.3 2.9zm1.7-4.3H5.3a9.8 9.8 0 010-2.8h3.4a9.8 9.8 0 010 2.8zm.2 4l.9-2.6h2a5.6 5.6 0 01-3 2.5zm1.1-4a11.6 11.6 0 000-2.8h2.4a5.7 5.7 0 010 2.8z"/></svg>',wordpressdotcom:'<svg aria-hidden="true" viewBox="0 0 14 14" class="metrics-icon metrics-icon--wordpressdotcom"><path d="M1 7c0 2.4 1.3 4.5 3.4 5.5l-3-8A6 6 0 001 6.9zm6 6c.7 0 1.4 0 2-.3L7 7.5l-1.8 5.3c.5.2 1 .3 1.7.3zm.9-8.9l2.1 6.6.7-2 .4-2c0-.6-.2-1.2-.5-1.6-.3-.6-.6-1-.6-1.5s.4-1 1-1a6 6 0 00-9 1H3.8c.4 0 .4.4 0 .5h-.6l2.2 6.7 1.3-4-1-2.6h-.6c-.3 0-.2-.5 0-.5h3.3c.3 0 .4.4 0 .4l-.6.1zm2.1 8.1c1.9-1 3-3 3-5.2 0-1-.2-2-.7-3 .1 1 0 2-.4 2.9l-1.8 5.4zM7 14A7 7 0 117 0a7 7 0 010 14z"/></svg>',reddit:'<svg aria-hidden="true" viewBox="0 0 14 14" class="metrics-icon metrics-icon--reddit"><path d="M13.8 6c0-.8-.7-1.4-1.6-1.4-.3 0-.7.2-1 .4-1-.8-2.5-1.2-3.8-1.2L8 .7l2.1.4c0 .6.5 1 1.1 1 .5 0 1-.7.9-1.2 0-.6-.5-.9-1.1-.8a1 1 0 00-.8.4L8 0l-.4.3L7 3.7c-1.5 0-2.9.5-4 1.2-.6-.5-1.6-.5-2.1 0a1.4 1.4 0 00.4 2.5v.5c0 2.2 2.7 4 5.8 4 3.3 0 6-1.8 6-4v-.7c.4-.2.8-.7.8-1.3zM3.7 7c0-.5.4-1 1-1s1 .5 1 1-.4 1-1 1a1 1 0 01-1-1zm5.9 2.7c-.8.5-1.7.9-2.6.9-.8 0-1.7-.4-2.5-.9a.3.3 0 010-.4H5a3.4 3.4 0 002 .7 3.4 3.4 0 002.1-.6c.1-.2.4-.2.5 0v.3zM9.4 8a1 1 0 01-1-1c0-.5.4-1 1-1 .5 0 1 .5 1 1s-.4 1-1 1z"/></svg>',redditlinks:'<svg aria-hidden="true" viewBox="0 0 14 14" class="metrics-icon metrics-icon--redditlinks"><path d="M13.8 6c0-.8-.7-1.4-1.6-1.4-.3 0-.7.2-1 .4-1-.8-2.5-1.2-3.8-1.2L8 .7l2.1.4c0 .6.5 1 1.1 1 .5 0 1-.7.9-1.2 0-.6-.5-.9-1.1-.8a1 1 0 00-.8.4L8 0l-.4.3L7 3.7c-1.5 0-2.9.5-4 1.2-.6-.5-1.6-.5-2.1 0a1.4 1.4 0 00.4 2.5v.5c0 2.2 2.7 4 5.8 4 3.3 0 6-1.8 6-4v-.7c.4-.2.8-.7.8-1.3zM3.7 7c0-.5.4-1 1-1s1 .5 1 1-.4 1-1 1a1 1 0 01-1-1zm5.9 2.7c-.8.5-1.7.9-2.6.9-.8 0-1.7-.4-2.5-.9a.3.3 0 010-.4H5a3.4 3.4 0 002 .7 3.4 3.4 0 002.1-.6c.1-.2.4-.2.5 0v.3zM9.4 8a1 1 0 01-1-1c0-.5.4-1 1-1 .5 0 1 .5 1 1s-.4 1-1 1z"/></svg>'},d=function defaultSelected(t){return 0===t?"metrics-selected--js":""};i=i+'<div class="sidebar-metric sidebar-metrics"><div class="metrics-header"><div class="metrics-title">'+(null==(e='<svg aria-hidden="true" viewBox="0 0 20 12" width="20" height="12" class="metrics-icon chart-icon"><path d="M14 0l2.3 2.3-4.9 4.9-4-4L0 10.6 1.4 12l6-6 4 4 6.3-6.3L20 6V0h-6z"/></svg>')?"":e)+'<span class="metrics-title__text">'+(null==(e=n.widgetTitle||"Metrics")?"":e)+"</span></div>";var v=o.viewAll;n.linkToFullPageWithDoi&&(i=i+'<a class="metrics-link"'+s.attr("href",n.linkToFullPageWithDoi,!0,!0)+' title="Go to metrics page"><span class="metrics-link__text">'+(null==(e=v)?"":e)+"</span>"+(null==(e='<svg aria-hidden="true" viewBox="0 0 12 12" width="12" height="12" class="metrics-icon link-icon"><path d="M10.7 10.7H1.3V1.3H6V0H1.3C.6 0 0 .6 0 1.3v9.4c0 .7.6 1.3 1.3 1.3h9.4c.7 0 1.3-.6 1.3-1.3V6h-1.3v4.7zM7.3 0v1.3h2.4L3.2 8l1 1 6.5-6.6v2.4H12V0H7.3z"/></svg>')?"":e)+"</a>"),i+='</div><div class="sidebar-metric__content-section">';var m=n.dataSections;i+='<ul class="metrics-nav metrics-rlist">',function(){var t=m;if("number"==typeof t.length)for(var a=0,n=t.length;a<n;a++){var c=t[a];i=c.months.length>0||c.firstNDays&&c.firstNDays.length>0?i+'<li class="metrics-nav__item"><a'+s.attr("class",s.classes(["metrics-nav__item-link","metrics-nav__item-link--".concat(c.id," ").concat(c.color?"metrics-nav__item-link--".concat(c.color):""," ").concat(c.displayDefault?"metrics-selected--js":"")],[!1,!0]),!1,!0)+' href="#" role="button"'+s.attr("title",c.title,!0,!0)+s.attr("data-title",c.id,!0,!0)+">"+(null==(e=h[c.id]?h[c.id]:h.default)?"":e)+'<span class="nav-text">'+(null==(e=c.title)?"":e)+"</span></a></li>":i+"<li"+s.attr("class",s.classes(["metrics-nav__item","metrics-nav__item--"+c.id],[!1,!0]),!1,!0)+"><span"+(s.attr("class",s.classes(["metrics-nav__item-link","metrics-nav__item-link--disabled","metrics-nav__item-link--".concat(c.id," ").concat(h[c.id]?"":"metrics-nav__item-link--default-".concat(a))],[!1,!1,!0]),!1,!0)+s.attr("data-title",c.id,!0,!0))+' title="No data available">'+(null==(e=h[c.id]?h[c.id]:h.default)?"":e)+'<span class="nav-text">'+(null==(e=c.title)?"":e)+"</span></span></li>"}else{n=0;for(var a in t){n++;c=t[a];i=c.months.length>0||c.firstNDays&&c.firstNDays.length>0?i+'<li class="metrics-nav__item"><a'+s.attr("class",s.classes(["metrics-nav__item-link","metrics-nav__item-link--".concat(c.id," ").concat(c.color?"metrics-nav__item-link--".concat(c.color):""," ").concat(c.displayDefault?"metrics-selected--js":"")],[!1,!0]),!1,!0)+' href="#" role="button"'+s.attr("title",c.title,!0,!0)+s.attr("data-title",c.id,!0,!0)+">"+(null==(e=h[c.id]?h[c.id]:h.default)?"":e)+'<span class="nav-text">'+(null==(e=c.title)?"":e)+"</span></a></li>":i+"<li"+s.attr("class",s.classes(["metrics-nav__item","metrics-nav__item--"+c.id],[!1,!0]),!1,!0)+"><span"+(s.attr("class",s.classes(["metrics-nav__item-link","metrics-nav__item-link--disabled","metrics-nav__item-link--".concat(c.id," ").concat(h[c.id]?"":"metrics-nav__item-link--default-".concat(a))],[!1,!1,!0]),!1,!0)+s.attr("data-title",c.id,!0,!0))+' title="No data available">'+(null==(e=h[c.id]?h[c.id]:h.default)?"":e)+'<span class="nav-text">'+(null==(e=c.title)?"":e)+"</span></span></li>"}}}.call(this),i=i+'</ul><div class="metrics-chart"><div class="metrics-chart__empty"><span>'+(null==(e=o.noDataMsg)?"":e)+'</span></div></div><div class="metrics-total">',function(){var t=n.dataSections;if("number"==typeof t.length)for(var a=0,r=t.length;a<r;a++){var l=t[a];i=i+"<div"+(s.attr("class",s.classes(["metrics-total__item","metrics-total__item--".concat(l.id," ").concat(l.months&&l.months.length>0?d(a):"")],[!1,!0]),!1,!0)+s.attr("title","Total ".concat(l.title),!0,!0))+"><span"+s.attr("class",s.classes(["metric-icon-fill","".concat(d(a)," metric-icon-fill--").concat(l.id," ").concat(l.color?"metric-icon-fill--".concat(l.color):"")],[!1,!0]),!1,!0)+">"+(null==(e=h[l.id]?h[l.id]:h.default)?"":e)+'</span><span class="metrics-total__item-text"'+s.attr("data-count",l.total?l.total.toLocaleString(c.language):"0",!0,!0)+">"+(null==(e=l.total?l.total.toLocaleString(c.language):"0")?"":e)+"</span></div>"}else{r=0;for(var a in t){r++;l=t[a];i=i+"<div"+(s.attr("class",s.classes(["metrics-total__item","metrics-total__item--".concat(l.id," ").concat(l.months&&l.months.length>0?d(a):"")],[!1,!0]),!1,!0)+s.attr("title","Total ".concat(l.title),!0,!0))+"><span"+s.attr("class",s.classes(["metric-icon-fill","".concat(d(a)," metric-icon-fill--").concat(l.id," ").concat(l.color?"metric-icon-fill--".concat(l.color):"")],[!1,!0]),!1,!0)+">"+(null==(e=h[l.id]?h[l.id]:h.default)?"":e)+'</span><span class="metrics-total__item-text"'+s.attr("data-count",l.total?l.total.toLocaleString(c.language):"0",!0,!0)+">"+(null==(e=l.total?l.total.toLocaleString(c.language):"0")?"":e)+"</span></div>"}}}.call(this),i+="</div>";var u,p=!1,f=!1,_=[],b=n["First-N-Days"];l="none",t="last12Months"===n.defaultDisplayedGraph?"last12":"last6Months"===n.defaultDisplayedGraph?"last6":"firstNDays"===n.defaultDisplayedGraph?"firstNDays":"total",r={total:{shown:!0,isDefaultTab:!1},last12:{shown:!1,isDefaultTab:!1},last6:{shown:!1,isDefaultTab:!1},firstNDays:{shown:!1,isDefaultTab:!1}};a.getDefaultMetrics=e=function pug_interp(){this&&this.block,this&&this.attributes;(function(){var t=n.dataSections;if("number"==typeof t.length)for(var e=0,i=t.length;e<i;e++){(s=t[e]).displayDefault&&_.push(s.id)}else{i=0;for(var e in t){var s;i++,(s=t[e]).displayDefault&&_.push(s.id)}}}).call(this)},a.getMonthsData=e=function pug_interp(){this&&this.block,this&&this.attributes;(function(){var t=n.dataSections;if("number"==typeof t.length)for(var e=0,i=t.length;e<i;e++){var s=t[e];p||_.length&&!_.includes(s.id)||(p=s&&s.months&&s.months.length>=6)&&(r.last6.shown=!0),!p||f||_.length&&!_.includes(s.id)||(f=s&&s.months&&s.months.length>=12)&&(r.last12.shown=!0),u||_.length&&!_.includes(s.id)||(u=s&&s.firstNDays&&s.firstNDays.length>1)&&(r.firstNDays.shown=!0)}else{i=0;for(var e in t){i++;s=t[e];p||_.length&&!_.includes(s.id)||(p=s&&s.months&&s.months.length>=6)&&(r.last6.shown=!0),!p||f||_.length&&!_.includes(s.id)||(f=s&&s.months&&s.months.length>=12)&&(r.last12.shown=!0),u||_.length&&!_.includes(s.id)||(u=s&&s.firstNDays&&s.firstNDays.length>1)&&(r.firstNDays.shown=!0)}}}).call(this),l=r[t]&&!0===r[t].shown,r[t]&&!0===r[t].shown?r[t].isDefaultTab=!0:!0===r.last6.shown?r.last6.isDefaultTab=!0:!0===r.firstNDays.shown?r.firstNDays.isDefaultTab=!0:r.total.isDefaultTab=!0},a.list=e=function pug_interp(t){this&&this.block,this&&this.attributes;(function(){var a=o.periods;if("number"==typeof a.length)for(var n=0,c=a.length;n<c;n++){var h=(v=a[n]).substring(v.indexOf(" ")+1),d=null;"firstNDays"===n&&(v=v.replace("{{N}}",b),d=b),!0===r[n].shown&&(i=i+'<li class="metrics-tabs__item"'+s.attr("data-JS","AY "+l,!0,!0)+"><a"+s.attr("class",s.classes(["metrics-tabs__item-link",!0===r[n].isDefaultTab?"metrics-selected--js":""],[!1,!0]),!1,!0)+' role="button" href="#"'+s.attr("data-title",n,!0,!0)+s.attr("data-n-days",d,!0,!0)+'><span class="tab-text">'+(null==(e=!t||"last6"!==n&&"last12"!==n?v:h)?"":e)+"</span></a></li>")}else{c=0;for(var n in a){c++;var v,m=(v=a[n]).substring(v.indexOf(" ")+1);d=null;"firstNDays"===n&&(v=v.replace("{{N}}",b),d=b),!0===r[n].shown&&(i=i+'<li class="metrics-tabs__item"'+s.attr("data-JS","AY "+l,!0,!0)+"><a"+s.attr("class",s.classes(["metrics-tabs__item-link",!0===r[n].isDefaultTab?"metrics-selected--js":""],[!1,!0]),!1,!0)+' role="button" href="#"'+s.attr("data-title",n,!0,!0)+s.attr("data-n-days",d,!0,!0)+'><span class="tab-text">'+(null==(e=!t||"last6"!==n&&"last12"!==n?v:m)?"":e)+"</span></a></li>")}}}).call(this)},a.getDefaultMetrics(),a.getMonthsData(),i=i+"<div"+s.attr("class",s.classes(["metrics-tabs"],[!0]),!1,!0)+'><div class="metrics-tabs__list-container"><ul class="metrics-rlist metrics-tabs__list">',a.list(!0),i+="</ul></div></div></div></div>"}.call(this,"convertedDefaultDisplayedGraph"in n?n.convertedDefaultDisplayedGraph:"undefined"!=typeof convertedDefaultDisplayedGraph?convertedDefaultDisplayedGraph:void 0,"data"in n?n.data:"undefined"!=typeof data?data:void 0,"navigator"in n?n.navigator:"undefined"!=typeof navigator?navigator:void 0,"tabsList"in n?n.tabsList:"undefined"!=typeof tabsList?tabsList:void 0,"test"in n?n.test:"undefined"!=typeof test?test:void 0,"translations"in n?n.translations:"undefined"!=typeof translations?translations:void 0),i}},845:function(t,e,i){"use strict";i.r(e);var s,a=i(483),n=i.n(a),c=i(268),r=i(293),l=i(394),o=i(395),h=function(){function SubTitle(t,e,i,s){this.container=t,this.selector=e,this.parentwidget=i,this.chartUtils=s,this.metricsBtn=null,this.translations=null,this.$container=null}return SubTitle.prototype.init=function(){this.create()},SubTitle.prototype.create=function(){this.translations=UX.i18n.localizedObject("articleMetrics");var t=this.container.querySelector(".metrics-tabs");if(this.$container=this.container.querySelector(".metrics-sub-title"),t){if(!t.parentNode.contains(this.$container)&&this.chartUtils.anyHasData){var e=document.createElement("p");e.classList.add("metrics-sub-title"),e.innerHTML=this.translations.start+'\n                <span class="metrics"></span>\n                <span class="period-note">\n                  '+UX.i18n.translate(this.translations.end.text,{period:6})+"\n                </span>",t.parentNode.insertBefore(e,t.nextSibling)}this.chartUtils.anyHasData?this.updateText():this.remove()}},SubTitle.prototype.remove=function(){this.$container&&this.$container.remove()},SubTitle.prototype.updateText=function(){var t=this;this.metricsBtn=this.container.querySelector(".metrics"),this.$container&&this.$container.removeAttribute("role"),this.setMetricsText(),this.setPeriodsText(),setTimeout((function(){t.$container&&t.$container.setAttribute("role","alert")}),250)},SubTitle.prototype.setMetricsText=function(){var t=[];this.parentwidget.selectedTabs.forEach((function(e){e&&e.classList.contains("metrics-selected--js")&&t.push(e.innerText)}));var e=t.join(", ").replace(/,(?=[^,]*$)/," "+this.translations.and);this.metricsBtn&&(this.metricsBtn.innerText=e.toLowerCase())},SubTitle.prototype.setPeriodsText=function(){var t=this.container.querySelector(".metrics-sub-title .period-note"),e=this.container.querySelector(".metrics-tabs__item-link.metrics-selected--js"),i=e&&e.dataset.title;if(t)switch(i){case"total":t.innerText="";break;case"firstNDays":var s=e&&e.dataset.nDays;t.innerText=UX.i18n.translate(this.translations.end.fmText,{period:s});break;default:t.innerText=UX.i18n.translate(this.translations.end.text,{period:{last6:6,last12:12}[i]})}},SubTitle}(),d=i(396),v=function(){function SidebarMetric(t){this.container=t,this.selector="sidebar-metric",this.svg="",this.valueLine="",this.margin={},this.width=null,this.height=null,this.dataCounts="",this.yScale="",this.xScale="",this.selectedSections=[],this.dataMonths="",this.dataDates="",this.x_axis="",this.y_axis="",this.selectedTabs="",this.selectedTabDataTitle="",this.svgContainerWidth=0}return SidebarMetric.prototype.init=function(t){var e=t.data;this.data=e,this.trackArticleMetrics=new c.a(this.container,this.selector,e),this.nav=new r.a(this.container,this.selector,this,this.trackArticleMetrics),this.chartUtils=new d.a(this.container,this.selector,this,this.nav),this.chartUtils.init(),this.chart=new o.a(this.container,this.selector,this,this.nav,this.chartUtils),this.tabs=new l.a(this.container,this.selector,this,this.chart,this.nav,this.chartUtils,this.trackArticleMetrics),this.subTitle=new h(this.container,this.selector,this,this.chartUtils),this.control(e),this.chart.init(e),this.subTitle.init()},SidebarMetric.prototype.control=function(t){var e=this,i=this.container.querySelector(".sidebar-metric__content-section").querySelectorAll("a.metrics-nav__item-link"),s=this.container.querySelectorAll(".metrics-tabs__item-link"),a=this.container.querySelector(".metrics-link");i.forEach((function(t){t.addEventListener("click",(function(t){e.navLinkOnClickHandler(t)}))})),s.length&&s.forEach((function(t){t.addEventListener("click",(function(t){e.periodLinksOnClickHandler(t)}))})),a&&a.addEventListener("click",(function(i){var s=t.data.doi;e.trackArticleMetrics.init("full-page",null,s)}))},SidebarMetric.prototype.navLinkOnClickHandler=function(t){this.chartUtils.firstNDays(),this.nav.handler(t),this.chart.eventUpdate(),this.chart.reset(t),this.subTitle.init()},SidebarMetric.prototype.periodLinksOnClickHandler=function(t){t.preventDefault(),this.tabs.thisTab=t.currentTarget,this.tabs.thisTab.classList.contains("metrics-selected--js")||(this.tabs.init(),this.chart.reset(t),this.subTitle.init())},SidebarMetric.prototype.selections=function(){this.selectedTabs=this.container.querySelectorAll("."+this.selector+" > .sidebar-metric__content-section .metrics-nav__item-link.metrics-selected--js");var t=this.container.querySelectorAll("."+this.selector+" > .sidebar-metric__content-section .metrics-nav__item-link")[0].classList.contains("metrics-nav__item-link--disabled");0!==this.selectedTabs.length||t||(this.container.querySelector("."+this.selector+" > .sidebar-metric__content-section .metrics-nav__item-link").classList.add("metrics-selected--js"),this.selectedTabs=this.container.querySelectorAll("."+this.selector+" > .sidebar-metric__content-section .metrics-nav__item-link.metrics-selected--js"))},SidebarMetric.prototype.chartTooltip=function(t,e){var i,s=this;this.chartUtils.parentWidget.svg.selectAll(".sidebar-metric .metrics-chart .dot--"+t).on("mouseover",(function(){var a=e.doi;i=setTimeout((function(e){s.trackArticleMetrics.sidebarCaptureEvents("point-hover",t,a)}),500)})).on("mouseout",(function(t){clearTimeout(i)}))},SidebarMetric}(),m=i(269),u=i(12),p=(s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function __(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),__assign=function(){return(__assign=Object.assign||function(t){for(var e,i=1,s=arguments.length;i<s;i++)for(var a in e=arguments[i])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)},f=function(t){function SideBarMetrics(e,i){var s=t.call(this,n.a,new v(e),e,i,new u.f(".sidebar-metric__data"))||this;return s.wrapper=e,s.index=i,s}return p(SideBarMetrics,t),SideBarMetrics.prototype.renderMetricTemplate=function(t,e,i){void 0===i&&(i=!1);var s=__assign(__assign({},t),{translations:UX.i18n.localizedObject(this.translationLabel)});i?null==e||e.insertAdjacentHTML("afterbegin",this.jadeTemplate(s)):null==e||e.insertAdjacentHTML("afterend",this.jadeTemplate(s)),this.initializeSidebarMetrics(t,e)},SideBarMetrics.prototype.initializeSidebarMetrics=function(t,e){var i=this;if(0===e.clientWidth){for(var s=e;s&&s!==document;s=s.parentNode)"none"===getComputedStyle(s).display&&s.classList.add("metrics-show__parent--js");new v(this.wrapper).init(t),document.querySelectorAll(".metrics-show__parent--js").forEach((function(t){t.classList.remove("metrics-show__parent--js")}))}else new v(this.wrapper).init(t);document.addEventListener("sidebarMetric:re-init",(function(){new v(i.wrapper).init(t)}))},SideBarMetrics}(m.a);e.default=f}}]);
//# sourceMappingURL=49-e0abe1b2fb0bca21e1f2.js.map