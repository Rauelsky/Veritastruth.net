(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{810:function(e,t,n){"use strict";n.r(t);var r=n(14),s=n.n(r),a=n(4),c=n.n(a),l=n(5),u=n.n(l),p=n(8),y=n.n(p),h=n(1),_=n.n(h),v=n(11),b=n.n(v),g=n(9),m=n.n(g);function _regenerator(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",s=n.toStringTag||"@@toStringTag";function i(n,r,s,c){var l=r&&r.prototype instanceof Generator?r:Generator,u=Object.create(l.prototype);return _regeneratorDefine2(u,"_invoke",function(n,r,s){var c,l,u,p=0,y=s||[],h=!1,_={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function d(t,n){return c=t,l=0,u=e,_.n=n,a}};function d(n,r){for(l=n,u=r,t=0;!h&&p&&!s&&t<y.length;t++){var s,c=y[t],v=_.p,b=c[2];n>3?(s=b===r)&&(u=c[(l=c[4])?5:(l=3,3)],c[4]=c[5]=e):c[0]<=v&&((s=n<2&&v<c[1])?(l=0,_.v=r,_.n=c[1]):v<b&&(s=n<3||c[0]>r||r>b)&&(c[4]=n,c[5]=r,_.n=b,l=0))}if(s||n>1)return a;throw h=!0,r}return function(s,y,v){if(p>1)throw TypeError("Generator is already running");for(h&&1===y&&d(y,v),l=y,u=v;(t=l<2?e:u)||!h;){c||(l?l<3?(l>1&&(_.n=-1),d(l,u)):_.n=u:_.v=u);try{if(p=2,c){if(l||(s="next"),t=c[s]){if(!(t=t.call(c,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,l<2&&(l=0)}else 1===l&&(t=c.return)&&t.call(c),l<2&&(u=TypeError("The iterator does not provide a '"+s+"' method"),l=1);c=e}else if((t=(h=_.n<0)?u:n.call(r,_))!==a)break}catch(t){c=e,l=1,u=t}finally{p=1}}return{value:t,done:h}}}(n,s,c),!0),u}var a={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(_regeneratorDefine2(t={},r,(function(){return this})),t),l=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,GeneratorFunctionPrototype):(e.__proto__=GeneratorFunctionPrototype,_regeneratorDefine2(e,s,"GeneratorFunction")),e.prototype=Object.create(l),e}return GeneratorFunction.prototype=GeneratorFunctionPrototype,_regeneratorDefine2(l,"constructor",GeneratorFunctionPrototype),_regeneratorDefine2(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName="GeneratorFunction",_regeneratorDefine2(GeneratorFunctionPrototype,s,"GeneratorFunction"),_regeneratorDefine2(l),_regeneratorDefine2(l,s,"Generator"),_regeneratorDefine2(l,r,(function(){return this})),_regeneratorDefine2(l,"toString",(function(){return"[object Generator]"})),(_regenerator=function _regenerator(){return{w:i,m:f}})()}function _regeneratorDefine2(e,t,n,r){var s=Object.defineProperty;try{s({},"",{})}catch(e){s=0}(_regeneratorDefine2=function _regeneratorDefine(e,t,n,r){function o(t,n){_regeneratorDefine2(e,t,(function(e){return this._invoke(t,n,e)}))}t?s?s(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))})(e,t,n,r)}function _callSuper(e,t,n){return t=_()(t),y()(e,function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function _isNativeReflectConstruct(){return!!e}()}()?Reflect.construct(t,n||[],_()(e).constructor):t.apply(e,n))}function _superPropGet(e,t,n,r){var s=b()(_()(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof s?function(e){return s.apply(n,e)}:s}var w,L=function(e){function CitedBy(e){var t;return c()(this,CitedBy),(t=_callSuper(this,CitedBy)).wrapper=e,t.isLazyLoading=!1,t.initialize(),t.addEventListeners(),t}return m()(CitedBy,e),u()(CitedBy,[{key:"selectors",get:function get(){return{list:".cited-by__list",spinner:".cited-by__spinner"}}},{key:"classList",get:function get(){return{seeMore:"cited-by__see-more",hide:"d-none"}}},{key:"elements",get:function get(){return{list:null,spinner:null}}},{key:"listItemClasses",get:function get(){return"pb-3 mb-4 border-bottom"}},{key:"initialize",value:function initialize(){_superPropGet(CitedBy,"initialize",this,3)([]),this._elements.list=this.wrapper.querySelector(this._selectors.list),this._elements.spinner=this.wrapper.querySelector(this._selectors.spinner),this.isLazyLoading="true"===this._elements.list.dataset.lazyload}},{key:"addEventListeners",value:function addEventListeners(){if(_superPropGet(CitedBy,"addEventListeners",this,3)([]),this._elements.list.addEventListener("click",this.onClick.bind(this)),this.isLazyLoading){var e,t="".concat(this._elements.list.dataset.source,"&ajaxRequest=true");null===(e=document.body.querySelector('[aria-controls="tab-citations"]'))||void 0===e||e.addEventListener("click",this.sendAjax.bind(this,t))}}},{key:"onClick",value:function onClick(e){e.stopPropagation();var t=e.target;if(t.classList.contains(this._classList.seeMore)){var n=t.parentNode,r=t.dataset.source;n.remove(),this.sendAjax(r)}}},{key:"sendAjax",value:(t=s()(_regenerator().m((function _callee(e){var t,n,r,s,a=this;return _regenerator().w((function(c){for(;;)switch(c.p=c.n){case 0:return c.p=0,this.setIsLoading(!0),c.n=1,fetch(e);case 1:return t=c.v,c.n=2,t.json();case 2:if((n=c.v).item.citations.length){c.n=3;break}return c.a(2);case 3:r=n.item.citations.map((function(e){return a.listItem(e,n)})).join(""),this._elements.list.insertAdjacentHTML("beforeend",r),n.seeMoreLink&&this._elements.list.insertAdjacentHTML("beforeend",this.seeMore(n.seeMoreLink+"&ajaxRequest=true")),this.setIsLoading(!1),c.n=5;break;case 4:c.p=4,s=c.v,console.debug(s),this.setIsLoading(!1);case 5:return c.a(2)}}),_callee,this,[[0,4]])}))),function sendAjax(e){return t.apply(this,arguments)})},{key:"setIsLoading",value:function setIsLoading(e){this._elements.spinner.classList.toggle(this._classList.hide,!e)}},{key:"seeMore",value:function seeMore(e){return'\n            <li class="cited-by__entry--see-more">\n                <a href="javascript:void(0)" data-source="'.concat(e,'" class="cited-by__see-more">See more</a>\n            </li>\n        ')}},{key:"authorsList",value:function authorsList(e){if(e&&e.length){var t=e.map((function(e){var t=e.firstName,n=e.surname;return'\n                <li class="list-inline-item cited-by__entry__author">\n                    '.concat(t," ").concat(n,",\n                 </li>")})).join("");return'\n            <ul class="cited-by__entry__authors list-inline">\n                '.concat(t,"\n            </ul>")}return""}},{key:"listItem",value:function listItem(e,t){var n="crossref"===e.source?t.registry.crossrefUrl+e.doi:"/doi/"+e.doi,r="crossref"===e.source?t.crossrefLinkLabel:t.internalLinkLabel,s='<span class="cited-by__entry__series-title">'.concat(e.parentTitle,", </span>"),a=e.lastPage?"-".concat(e.lastPage):"",c='<span class="cited-by__entry__page-range">('.concat(e.firstPage).concat(a,"), </span>");return'\n        <li class="cited-by__entry '.concat(this.listItemClasses,'">\n            ').concat(this.authorsList(e.contributors),'\n            <span class="cited-by__entry__title">').concat(e.itemTitle,", </span>\n            ").concat(e.parentTitle?s:"","\n            ").concat(e.volume?'<span class="cited-by__entry__volume"><b>'.concat(e.volume,"</b>, </span>"):"","\n            ").concat(e.issue?'<span class="cited-by__entry__issue">'.concat(e.issue,", </span>"):"","\n            ").concat(e.firstPage?c:"","\n            ").concat(e.year?'<span class="cited-by__entry__pub-date">('.concat(e.year,"). </span>"):"",'\n            <a href="').concat(n,'" title="').concat(r,'" class="cited-by__entry__doi">').concat(n,'</a>\n            <div class="cited-by__entry__extra-links">\n                <a href="').concat(n,'" class="cited-by__entry__visitable">').concat(r,"</a>\n            </div>\n        </li>\n        ")}}]);var t}(n(10).a),k=n(12),D=(w=function(e,t){return(w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}w(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),__decorate=function(e,t,n,r){var s,a=arguments.length,c=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(c=(a<3?s(c):a>3?s(t,n,c):s(t,n))||c);return a>3&&c&&Object.defineProperty(t,n,c),c},__metadata=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__awaiter=function(e,t,n,r){return new(n||(n=Promise))((function(s,a){function fulfilled(e){try{step(r.next(e))}catch(e){a(e)}}function rejected(e){try{step(r.throw(e))}catch(e){a(e)}}function step(e){e.done?s(e.value):function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())}))},__generator=function(e,t){var n,r,s,a,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function verb(a){return function(l){return function step(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(s=2&a[0]?r.return:a[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,a[1])).done)return s;switch(r=0,s&&(a=[2&a[0],s.value]),a[0]){case 0:case 1:s=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(s=c.trys,(s=s.length>0&&s[s.length-1])||6!==a[0]&&2!==a[0])){c=0;continue}if(3===a[0]&&(!s||a[1]>s[0]&&a[1]<s[3])){c.label=a[1];break}if(6===a[0]&&c.label<s[1]){c.label=s[1],s=a;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(a);break}s[2]&&c.ops.pop(),c.trys.pop();continue}a=t.call(e,c)}catch(e){a=[6,e],r=0}finally{n=s=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},j=function(e){function Texts(){return null!==e&&e.apply(this,arguments)||this}return D(Texts,e),Texts}(k.e),x=function(e){function ClassList(){var t=null!==e&&e.apply(this,arguments)||this;return t.active="active",t.hidden="d-none",t}return D(ClassList,e),ClassList}(k.e),G=function(e){function Selectors(){var t=null!==e&&e.apply(this,arguments)||this;return t.expandLink=new k.f(".expand-link"),t.deepDyve=new k.f(".deep-dyve"),t.scrollIntoView=new k.f(".scroll-into-view"),t}return D(Selectors,e),Selectors}(k.g),P=function(e){function Elements(){return null!==e&&e.apply(this,arguments)||this}return D(Elements,e),Elements}(k.c),C=function(){function AccessDenial(e){this.wrapper=e}return Object.defineProperty(AccessDenial.prototype,"deepDyveUrl",{get:function(){return"http://www.deepdyve.com/rental-link"},enumerable:!1,configurable:!0}),AccessDenial.prototype.initialize=function(){return this.elements.initialize(this.wrapper),this.addEventListeners(),this.elements.scrollIntoView&&this.scrollIntoView(),this.elements.deepDyve&&this.initDeepdyve(),this},AccessDenial.prototype.addEventListeners=function(){var e;null===(e=this.elements.expandLink)||void 0===e||e.addEventListener("click",this.onExpandLinkClick.bind(this)),window.addEventListener("scroll",this.onScroll.bind(this),{once:!0})},AccessDenial.prototype.onExpandLinkClick=function(e){e.preventDefault();var t=this.domUtils.nextAll(this.elements.expandLink,".content");this.domUtils.toggleClasses(this.elements.expandLink,this.classList.active),this.domUtils.toggleClasses(t,this.classList.hidden)},AccessDenial.prototype.initDeepdyve=function(){return __awaiter(this,void 0,void 0,(function(){var e,t,n,r,s;return __generator(this,(function(a){switch(a.label){case 0:if(e=this.elements.deepDyve.dataset,t=e.affid,n=e.issn,r=e.doi,!t||!n||!r)return[2];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.api.fetch(this.deepDyveUrl,"GET","jsonp",{affid:t,issn:n,doi:r})];case 2:return s=a.sent(),this.elements.deepDyve.setAttribute("href",s.url),this.domUtils.removeClasses(this.elements.deepDyve,this.classList.hidden),[3,4];case 3:return a.sent(),[3,4];case 4:return[2]}}))}))},AccessDenial.prototype.scrollIntoView=function(){return __awaiter(this,void 0,void 0,(function(){var e,t;return __generator(this,(function(n){switch(n.label){case 0:return e=this.wrapper.offsetTop,t=this.browserUtils.delay(1e3),this.timeout=t.next().value,[4,t.next().value];case 1:return n.sent(),window.scrollTo({top:e,behavior:"smooth"}),[2]}}))}))},AccessDenial.prototype.onScroll=function(){clearTimeout(this.timeout)},__decorate([Object(k.l)(),__metadata("design:type",k.a)],AccessDenial.prototype,"api",void 0),__decorate([Object(k.l)(),__metadata("design:type",k.b)],AccessDenial.prototype,"browserUtils",void 0),AccessDenial=__decorate([Object(k.d)(G,P,x,j),__metadata("design:paramtypes",[HTMLElement])],AccessDenial)}();t.default=function main(e){var t=document.getElementById("cited-by"),n=document.querySelector(".purchaseArea");try{t&&(e.CitedBy=new L(t))}catch(e){console.error(e)}try{n&&(e.accessDenial=new C(n).initialize())}catch(e){console.error(e)}}}}]);
//# sourceMappingURL=article-32f4a44a848dfc375f71.js.map